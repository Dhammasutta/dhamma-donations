<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÑ‡∏ü‡∏•‡πå‡∏ò‡∏£‡∏£‡∏°‡∏∞‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</title>
  <style>
    body {
      font-family: 'Sarabun', sans-serif;
      background: #fffdf5;
      color: #4e342e;
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #6d4c41;
      margin-bottom: 2rem;
    }
    .file-entry {
      background: #fff8e1;
      border-left: 6px solid #fbc02d;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .file-entry h2 {
      margin: 0 0 0.5rem 0;
      font-size: 1.25rem;
      color: #5d4037;
    }
    .file-meta {
      font-size: 0.95rem;
      color: #6d4c41;
      margin-bottom: 0.5rem;
    }
    .file-meta span {
      display: inline-block;
      margin-right: 1rem;
    }
    .file-description {
      font-size: 0.95rem;
      color: #4e342e;
      margin-bottom: 0.5rem;
    }
    .download-link a {
      display: inline-block;
      padding: 6px 14px;
      background: #6d4c41;
      color: white;
      border-radius: 6px;
      text-decoration: none;
      font-size: 0.95rem;
    }
    .download-link a:hover {
      background: #5d4037;
    }
  </style>
</head>
<body>
  <h1>üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ò‡∏£‡∏£‡∏°‡∏∞‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</h1>
  <div id="file-list">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>

  <script>
    const fileList = document.getElementById('file-list');

    fetch('donations.json?v=' + new Date().getTime())  // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô cache
      .then(response => {
        if (!response.ok) throw new Error('‡πÇ‡∏´‡∏•‡∏î JSON ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        return response.json();
      })
      .then(data => {
        fileList.innerHTML = '';

        data.forEach(file => {
          const icon = file.type === 'pdf' ? 'üìÑ' : file.type === 'mp3' ? 'üéß' : file.type === 'mp4' ? 'üéûÔ∏è' : 'üóÇÔ∏è';

          const html = `
            <div class="file-entry">
              <h2>${icon} ${file.title}</h2>
              <div class="file-description">${file.description || ''}</div>
              <div class="file-meta">
                <span><strong>‡πÑ‡∏ü‡∏•‡πå:</strong> ${file.filename}</span>
                <span><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</strong> ${file.type.toUpperCase()}</span>
                <span><strong>‡∏Ç‡∏ô‡∏≤‡∏î:</strong> ${file.filesize}</span>
                ${file.pages ? `<span><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤:</strong> ${file.pages}</span>` : ''}
                <span><strong>‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ:</strong> ${file.donor}</span>
              </div>
              <div class="download-link">
                <a href="${file.url}" target="_blank" download>‚¨áÔ∏è ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</a>
              </div>
            </div>
          `;
          fileList.innerHTML += html;
        });
      })
      .catch(error => {
        console.error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:', error);
        fileList.innerHTML = '<p style="color:red;">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ</p>';
      });
  </script>
</body>
</html>
